
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Performance Observation Task &#8212; My Jupter Notebook on data science.</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/togglebutton.js"></script>
    <script src="../../../../_static/clipboard.min.js"></script>
    <script src="../../../../_static/copybutton.js"></script>
    <script src="../../../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Neo4j Basic" href="../a3.html" />
    <link rel="prev" title="NoSQL Aggregation" href="../a2.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">My Jupter Notebook on data science.</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  About
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://postsent.github.io/categories/">
   Back to Blog
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../reference.html">
   Acknowledgement
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Data Science Related Courses
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../unsw/9417/9417-intro.html">
   Machine Learning (UNSW)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../unsw/9417/9417-basic.html">
     Basic with examples
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../unsw/9417/9417-project.html">
     Project - Classification
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../unsw/9417/9417-report/report.html">
     Project - report
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../unsw/9418/9418-intro.html">
   PGM (UNSW)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../unsw/9418/9418-EDA.html">
     EDA on Times Series Dataset
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../unsw/9418/9418-project.html">
     Time series project code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../unsw/9418/9418-project/report.html">
     Time series report
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../unsw/9517/9517-intro.html">
   Computer Vision (UNSW)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../unsw/9517/9517-a1-code.html">
     Basic image processing, thresholding, count cells
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../unsw/9517/9517-a1/report.html">
     Report on Basic image processing, etc
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../unsw/9517/9517-lane_detection.html">
     Lane detection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../unsw/9517/9517-vehicle-detection.html">
     Vehicle detection (by teammate)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../unsw/9444/9444-intro.html">
   Deep Learning (UNSW)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../unsw/9444/9444-project.html">
     Image classification
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../unsw/9444/assignment1/assignment1.html">
     Characters, Spirals and Hidden Unit Dynamics
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../unsw/3900/3900-intro.html">
   Capstone (UNSW)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../unsw/3900/project/3900-project.html">
     <strong>
      Chatbot
     </strong>
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../unsw/3431/3431-intro.html">
   ROS &amp; CV (UNSW)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../unsw/3431/project/project.html">
     Mini self-driving
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../5046/5046-intro.html">
   NLP (USYD)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../5046/a2/a2.html">
     Report - In-game Toxicity Detection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../5046/a2.html">
     In Game Toxicity seq2seq classification
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../5046/a1.html">
     Binary text classification
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../5349/5349-intro.html">
   Cloud Computing (USYD)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../5349/a2/a2.html">
     Data Preprocessing and Performance Tuning with Spark
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../5349/a2.html">
     Data Preprocessing and Performance Tuning with Spark
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../5349/a1.html">
     Text Analysis with Spark RDD API
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../5349/a1-report.html">
     Report – Text Analysis with Spark RDD API
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../5338-intro.html">
   NoSQL&amp;Graph Data Model(USYD)
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="../a1.html">
     NoSQL basic
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../a2.html">
     NoSQL Aggregation
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     <strong>
      Performance Observation Task
     </strong>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../a3.html">
     Neo4j Basic
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../a4.html">
     Neo4j Query
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../5048/5048-intro.html">
   Visual Analytics Tableau (USYD)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../5048/individual.html">
     Individual Report
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../5048/group.html">
     Group Report (My part)
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Machine Learning
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../../ml/regression/regression.html">
   Regression
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../../ml/regression/p1-crypto-prediction.html">
     Crypto Prediction
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../ml/classification/classification.html">
   Classification (placeholder)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../ml/time-series/time-series.html">
   Time Series (placeholder)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../ml/ml.html">
   General
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Deep Learning
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../dl/dl.html">
   General
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  NLP
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../nlp/nlp.html">
   placeholder
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Computer Vision
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../cv/cv.html">
   Placeholder
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Misc
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../misc/math.html">
   Math
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../misc/misc.html">
   Misc
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../misc/term.html">
   Terminology
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../misc/todo.html">
   TODO
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Coding Basic
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../../python/basic-intro.html">
   Numpy, Pandas, Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../../python/numpy.html">
     Numpy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../../python/pandas.html">
     Pandas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../../python/leetcode.html">
     Leetcode
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Side Projects
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../side-project/web-scrapter.html">
   Course Enrolment Scrapter
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Unfinished
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../../unfinished/pytorch-nlp-bk/nlp-book.html">
   NLP Book
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../../unfinished/pytorch-nlp-bk/intro.html">
     Intro
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../../unfinished/pytorch-nlp-bk/nn.html">
     Feed-Forward Networks for NLP
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../../unfinished/pytorch-nlp-bk/prac-ch3.html">
     Chapter 3
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../../unfinished/jigsaw-intro.html">
   Jigsaw
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../../unfinished/jiagsaw-toxic-comment-serverity-rate/README.html">
     Folder Structure
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../../unfinished/jiagsaw-toxic-comment-serverity-rate/notebooks/simple-rnn.html">
     Simple
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../../unfinished/jiagsaw-toxic-comment-serverity-rate/notebooks/lstm.html">
     Upgrade RNN
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../../unfinished/jiagsaw-toxic-comment-serverity-rate/notebooks/helper.html">
     Common
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../unfinished/nlp-reading.html">
   Book Reading
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>
<a href="https://github.com/postsent/nb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="bottom"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../../_sources/ds-courses/usyd/5338/a2-report/report.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   <strong>
    Performance Observation Task
   </strong>
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   <strong>
    Introduction
   </strong>
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#single-field-index-and-compound-index-usage">
   <strong>
    Single field index and compound index usage
   </strong>
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#multikey-index-usage">
   <strong>
    Multikey Index Usage
   </strong>
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#aggregation-performance">
   <strong>
    Aggregation Performance
   </strong>
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusion">
   <strong>
    Conclusion
   </strong>
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Performance Observation Task</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   <strong>
    Performance Observation Task
   </strong>
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   <strong>
    Introduction
   </strong>
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#single-field-index-and-compound-index-usage">
   <strong>
    Single field index and compound index usage
   </strong>
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#multikey-index-usage">
   <strong>
    Multikey Index Usage
   </strong>
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#aggregation-performance">
   <strong>
    Aggregation Performance
   </strong>
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusion">
   <strong>
    Conclusion
   </strong>
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <p>COMP5338 Assignment 2		Jerry Wei</p>
<section class="tex2jax_ignore mathjax_ignore" id="performance-observation-task">
<h1><strong>Performance Observation Task</strong><a class="headerlink" href="#performance-observation-task" title="Permalink to this headline">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="introduction">
<h1><strong>Introduction</strong><a class="headerlink" href="#introduction" title="Permalink to this headline">#</a></h1>
<p>This report aims to evaluate the performance impact of different query designs and types of indexing such as the single field, compound and multi-key index in the MongoDB system. An alternative improved implementation is made for workload 5 which investigates some potential factors that could improve the query performance.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="single-field-index-and-compound-index-usage">
<h1><strong>Single field index and compound index usage</strong><a class="headerlink" href="#single-field-index-and-compound-index-usage" title="Permalink to this headline">#</a></h1>
<p>Query 1 evaluates two query plans as demonstrated in the first two images in Figure 1 which are one winning plan and one rejected plan respectively. The winning plan involves 2 stages, namely, FETCH and IXSCAN stages. The former one is to retrieve documents from the database and the latter one is to scan the index key for query optimisation. In the second stage, the key used is yearlyAvgDryDays which is a single field index that is not unique, sparse or partial. The direction of index traversal is backward due to the descending sort order in the query. The associated index bound is between 150 (exclusive) and positive infinity. Similarly, the rejected plan also involves two stages i.e. FETCH and IXSCAN. The key used is the compound index of yearlyAvgDryDays and yearlyAvgSnowdays that is not unique, sparse or partial. The index traversal direction is backward and the index bound for the key yearlyAvgDryDays is between 150 (exclusive) and positive infinity. Furthermore, the yearlyAvgSnowdays index has a full index range bound between the maximum key and minimum key since it is not directly involved in the query.</p>
<p>The winning plan is chosen because the single field index helps run the query faster as a result of its smaller index size compared to the compound index. Note that the MongoDB query optimiser chooses the optimal plan by running all candidate plans partially in parallel and then selects the plan that first returns all the desired items. This faster performance by the single field index is because the compound index bound involves two fields which causes additional time required for loading the additional yearlyAvgSnowdays field when only the yearlyAvgDryDays field is actually needed.</p>
<p>The yearlyAvgDrydays single field index is not evaluated because the query does not contain a field that requires data from the yearlyAvgDrydays field.</p>
<p>The sort order can be obtained from the index for the query. Based on MongoDB’s official user manual, the inclusion of a stage called SORT is an indicator that the sort order cannot be obtained from the index and need to be handled in memory. As mentioned before, the stages involved in the winning plan do not contain a SORT stage which means the sort order is obtained from the index.</p>
<p>Query 2, in contrast, evaluates only one plan with no rejected plan as shown in the last two images in Figure 1. There are 6 stages in total involved in the query plan which are SUBPLAN, SORT, FETCH, OR, IXSCAN and IXSCAN, respectively. Note that SUBPLAN refers to a generic index scan. After SUBPLAN stage, the query optimiser selects a sort pattern based on the query (descending order for both fields in this case) and then runs the sort operation in memory once the relevant input is received. Next, the optimiser calculates the memory limit based on the hardware specification. After that, the data is retrieved from the database and the system creates an OR stage to evaluate the two conditions from the query. Note that the OR stage will evaluate the two conditions in the order as shown in the third image in Figure 1 i.e. if the first condition is satisfied, then the second children stage will not be evaluated by the query optimiser. Next, the first children stage of the OR stage is IXSCAN with a yearlyAvgSnowdays single field index, which uses forward direction index traversal with an index bound from 150 to positive infinite. The second children stage of the OR stage is another IXSCAN with a compound index. It also uses forward direction index traversal with an index bound from 100 to positive infinite for the yearlyAvgDryDays field and minimum and maximum key for the other field.</p>
<p>The single field index yearlyAvgSnowdays is not evaluated because the compound index is prefered by the query optimiser. It is because the compound index includes the yearlyAvgSnowdays as its first field meaning that there will be no performance loss when using it over the single field and the additional field gives more capability in improving the query performance and thus is chosen by the query optimiser.</p>
<p>The sort order cannot be obtained from the index as shown in the third image in Figure 1 where the execution stages include a SORT stage that uses a blocking sort operation which reads all input documents. The reason is that the execution of the OR stage leads to a smaller remaining document size compared to the compound index size, which makes in-memory sorting more efficient than using the compound index. Therefore, in memory sort is prefered by the query optimiser.</p>
<p>In terms of execution statistics, the differences between the two queries are 1) the number of plans evaluated i.e. two compared to one. 2) the number of indexes used i.e. one compared to two 3) the number of stages taken i.e. two compared to six. The yearlyAvgDrydays index is evaluated in the first query whereas the yearlyAvgSnowdays index and the compound index are used in the second query because 1) the index can only be used when they exist in the query field 2) if multiple indexes could be chosen, then the better performance one, in terms of space and time complexity, will be selected.</p>
<p><code class="docutils literal notranslate">&#160; </code><img alt="" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.001.png" /> <img alt="A picture containing timeline Description automatically generated" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.002.png" /> <img alt="Graphical user interface, text, application Description automatically generated" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.003.png" /> <img alt="" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.004.png" /></p>
<p><em>Figure 1 – Query 1 &amp; query 2 winning and rejected plans</em></p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="multikey-index-usage">
<h1><strong>Multikey Index Usage</strong><a class="headerlink" href="#multikey-index-usage" title="Permalink to this headline">#</a></h1>
<p>There is no rejected plan but one winning plan in query 3 as shown in the first two images in Figure 2. The winning plan involves two stages called FETCH and IXSCAN. Firstly, the query optimiser defines a filter stage with a condition on the dryDays field in each array element in the monthlyAvg field by two range bounds. Another condition is set on the region field based on the value United States. Note that this filter order is different to those in the query due to the query optimisation. Next, the IXSCAN stage uses a multikey index with a forward direction traversal and a bound between 20 and 30 on the dryDays field. This stage will be used to optimise the aforementioned filter stage with the relevant index. Because the query uses the elemMatch operator to join the predicates, the MongoDB query optimiser can intersect the upper and lower bounds to produce a smaller range document scan.</p>
<p>There are two plans evaluated in query 4 where one is rejected and one is winning as shown in the last two images in Figure 2. The winning plan has two stages i.e. FETCH and IXSCAN. In the FETCH stage, a filter operation is defined with a condition on the dryDays field with only one bound i.e. less than 30 and another condition on the region field based on the value United States. In the IXSCAN stage, it uses a multiKey index with a forward direction traversal with a bound between 20 and positive infinity on the dryDays field.  Since query 4 does not use elemMatch operator, the multikey index bounds cannot be intersected. This means when the query is run, the system will 1) match all elements that are less than 20 without using an index 2) filter region by the United States 3) use an index to filter the remaining documents with a value higher than 20. The rejected plan involves FETCH and IXSCAN stage, which is the same as the winning plan. The FETCH stage is similar to the winning plan but it filters the documents based on the condition greater than 20 on the dryDays field instead. And that the IXSCAN stage is also similar except the bound is between 30 and negative infinity. The plan is rejected because the less than 30 bound in the winning plan gives fewer documents size which is considered more efficient.</p>
<p><img alt="" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.005.png" /><img alt="" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.006.png" /><img alt="Text Description automatically generated" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.007.png" /><img alt="Text Description automatically generated" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.008.png" /></p>
<p><em>Figure 2 - query 3 &amp; query 4 winning and rejected plan</em></p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="aggregation-performance">
<h1><strong>Aggregation Performance</strong><a class="headerlink" href="#aggregation-performance" title="Permalink to this headline">#</a></h1>
<p>In summary, the alternative implementation has all SORT stages replaced by the index scan and an additional projection stage which reduces the initial input document size by around 25%. Given the sort order can be obtained from the indexes, the number of documents scanned and memory usage is reduced to 0 relatively for the associated sort stage.</p>
<p>Note that the performance comparison below shows the execution statistics in a stage-wise manner. It is because the explain method tool gives details on the first stage but less on the others. To access a more detailed explanation in the intermediate stage, the output before the investigated stage is stored as a collection and the investigated query stage is run separately based on the saved collection. Additionally, to ensure fairness in the comparison, all cached query plans are removed every time for each investigated execution. Besides, to remove the instability in query running time, standard ablation study practice is applied with 5 experiments run independently where the mean and standard deviation is recorded. In practice, however, the execution time is averaging at 2 milliseconds and thus the time cost is not further compared below. The alternative implementation is provided in Figure 5.</p>
<p>In the original implementation, the execution statistics involves mainly 5 stages.  The query 1) flatten the monthlyAvg field and returns 1260 documents 2) group by city field and aggregate the low, rainfall and month field into an array, which uses 476700 bytes of memory and is executed in  2 milliseconds 3) use a projection operation to create two new fields. The lowestMinTmpMonth field will first sort the monthlyAvg array field by the low and then the rainfall field in ascending and descending order respectively. Then, it collects only the first element of the sorted array. The wettestMonth field runs similarly except the sorting is based on descending and ascending order on the rainfall and low field. This stage returns 105 documents and takes 3 milliseconds. 4) a match operation is run based on the equality between the month in the lowestMinTmpMonth and wettestMonth, which outputs 12 documents in 3 milliseconds 5) the documents are sorted based on the _id field in ascending order in 3 milliseconds with approximately 11968 bytes data involved.</p>
<p>The following section highlights why the alternative implementation is more efficient.</p>
<p>Firstly, an improvement made is to use projection operation to reduce scanned document size as shown in Figure 3. Since only four fields, namely, city, low, rainfall and month are needed for query 5 input, all other unnecessary fields are filtered using the project. This helps reduce the storage size from 64 to 48 MB and the average object size from 159 to 100 MB.</p>
<p>Secondly, a single field city index is used to speed up the sorting operation as shown in Figure 4. It is beneficial because the sort order can be obtained from the index and no in-memory sort is needed. Note that the _id field is replaced by the city value and we assumed the replaced _id index will not be used in the sorting by default. The memory usage for that particular stage is reduced from 104857600 bytes / 1024 / 1024 = 100 MB to 0 since no in-memory sort is needed. This is demonstrated by the memLimit field in the first image of Figure 4.</p>
<p>Thirdly, two compound indexes are made to optimise the two-field sorting stage. The change from in-memory sort to index scan reduces the number of documents scanned size from 100 Mb to 0. Similarly, memory usage is also reduced to 0  relatively for sorting. To access detailed execution statistics and consider the sortArray operation has the same behaviours as a push followed by a sort operation ( based on the MongoDB official website),  we decompose the sortArray operation using unwind and sort operations as shown in Figure 6. Besides, the reason why two compound indexes are created in different order is because the order of the two sorting fields in the query is also different. To elaborate, the sorting order of the compound field is global relative to the whole collection on the first field but local on the second.</p>
<p>Fourthly, a projection operation is placed as the last stage to remove the redundant data in which the original implementation has the lowestMinTmpMonth and wettestMonth holds the same data. The final result output is illustrated in Figure 8.</p>
<p>Lastly, a potential improvement is to optimise the two-field sorting stage, which is not implemented. Given the two-field sorting stage needs only one element as output as suggested by the first operator, we could optimise the query by splitting the sorting into 3 stages: 1) sort by the first field as normal 2) iterate through the sorted array in the first-field sorting order and start filtering out array elements once it has a different first field value 3) sort the remaining array by the second field. In this way, we do not need to sort the whole array by the second field, but rather only those with the same first appeared first-field value. Given the small likelihood of array elements with the same first field value, this could reduce the document scanned size from 12 to potentially 1 for each document for this particular stage.</p>
<p><img alt="" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.009.png" /><img alt="Text Description automatically generated" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.010.png" /></p>
<p><em>Figure 3 – comparison with and without projection</em></p>
<p><img alt="Text Description automatically generated" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.011.png" /><img alt="Text Description automatically generated" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.012.png" /></p>
<p><em>Figure 4 – comparison without and with city index</em></p>
<p><img alt="Text Description automatically generated" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.013.png" /></p>
<p><em>Figure 5 - an alternative implementation</em></p>
<p><img alt="Text Description automatically generated" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.014.png" /> ![A picture containing text</p>
<p>Description automatically generated](Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.015.png)</p>
<p><em>Figure 6 - decompose the sortArray to sort operation to explain the index effect</em></p>
<p><img alt="Text Description automatically generated" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.016.png" /><img alt="Text Description automatically generated" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.017.png" /><img alt="Text Description automatically generated" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.018.png" /><img alt="" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.019.png" /></p>
<p><em>Figure 7 - before and after adding two compound index comparison</em></p>
<p><img alt="" src="../../../../_images/Aspose.Words.227f6b1f-b9cf-4815-828b-323521354788.020.png" /></p>
<p><em>Figure 8 – final output with same data but different structure</em></p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="conclusion">
<h1><strong>Conclusion</strong><a class="headerlink" href="#conclusion" title="Permalink to this headline">#</a></h1>
<p>In conclusion, using explicit projection, single field, compound and multi-key index under appropriate conditions could reduce the number of documents scanned and memory usage significantly, which helps improve the query performance. This is examined and demonstrated by performance comparison in the different experiments mentioned above.</p>
<p>2</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./ds-courses/usyd/5338/a2-report"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../a2.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">NoSQL Aggregation</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../a3.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Neo4j Basic</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Jerry<br/>
  
      &copy; Copyright 2021.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>